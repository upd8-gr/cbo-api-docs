get:
  tags: [Expense Categories]
  summary: Expense categories (list)
  description: >
    Paginated list of expense categories. Supports search (search + search_fields) and sorting.
  security:
    - BearerAuth: []

  parameters:
    - name: search
      in: query
      required: false
      schema: { type: string }
      example: "Fuel"

    - name: search_fields
      in: query
      required: false
      description: Comma-separated fields used in OR LIKE search.
      schema: { type: string }
      example: "name"

    - name: sort_by
      in: query
      required: false
      schema:
        type: string
        enum: [id, name, created_at, updated_at, company_id]
      example: id

    - name: sort_order
      in: query
      required: false
      schema:
        type: string
        enum: [asc, desc]
      example: asc

    - name: page
      in: query
      required: false
      schema: { type: integer, minimum: 1, default: 1 }
      example: 1

    - name: page_size
      in: query
      required: false
      description: Page size (default 50, max 100).
      schema: { type: integer, minimum: 1, maximum: 100, default: 50 }
      example: 50

  responses:
    "200":
      description: OK
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/expense-categories/ExpenseCategoryIndexResponse.yaml
          examples:
            default:
              value:
                success: true
                data:
                  - id: 10
                    title: "Fuel"
                    color: "#FF9900"
                    parent: "Car expenses"
                    company: 1
                    created: "2026-02-11 10:00:00"
                    modified: "2026-02-12 10:00:00"
                meta:
                  current_page: 1
                  last_page: 1
                  per_page: 50
                  total: 1
    "401": { $ref: ../../../_shared/components/responses/Unauthorized.yaml }
    "403": { $ref: ../../../_shared/components/responses/Forbidden.yaml }