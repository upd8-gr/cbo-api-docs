get:
  tags: [Clients]
  summary: Clients (list)
  description: >
    Lists clients (isSeller=false) with optional search and client_type filtering.
    Response is paginated and wrapped as {success,data,meta}.
  security:
    - BearerAuth: []
  parameters:
    - name: search
      in: query
      required: false
      description: Search term (used only when search_fields is present).
      schema: { type: string }
      example: "Papad"

    - name: search_fields
      in: query
      required: false
      description: Comma-separated fields used in OR LIKE search. The available fields are: first_name, last_name, vat, email, invoice_name, company_name, tax_office, profession, client_type.
      schema: { type: string }
      example: "fname,lname,vat,email"

    - name: client_type
      in: query
      required: false
      description: Filter by client type(s). Type 1 is company (B2B), type 2 is person (B2C).
      style: form
      explode: true
      schema:
        oneOf:
          - type: integer
            enum: [1, 2]
          - type: array
            items:
              type: integer
              enum: [1, 2]
      examples:
        single: { value: 1 }
        multiple: { value: [1, 2] }

    - name: sort_by
      in: query
      required: false
      schema:
        type: string
        enum: [id, primary_id, fname, lname, vat, email, client_type, created_at, updated_at]
      example: id

    - name: sort_order
      in: query
      required: false
      schema:
        type: string
        enum: [asc, desc]
      example: asc

    - name: page
      in: query
      required: false
      schema: { type: integer, minimum: 1, default: 1 }
      example: 1

    - name: page_size
      in: query
      required: false
      description: Page size (default 50, max 100).
      schema: { type: integer, minimum: 1, maximum: 100, default: 50 }
      example: 50

  responses:
    "200":
      description: OK
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/clients/ClientIndexResponse.yaml
          examples:
            default:
              value:
                success: true
                data:
                  - id: 1
                    code: "C-0001"
                    first_name: "Giorgos"
                    last_name: "Papadopoulos"
                    email: "g@example.com"
                    telephone: "2100000000"
                    cellphone: null
                    vat: "123456789"
                    invoice_name: "ACME SA"
                    company_name: "ACME SA"
                    tax_office: "Α Αθηνών"
                    profession: null
                    client_type: 1
                    comments: null
                    addresses: []
                    company: 1
                    created: "2026-02-11 10:00:00"
                    modified: "2026-02-12 10:00:00"
                meta:
                  current_page: 1
                  last_page: 1
                  per_page: 50
                  total: 1
    "401": { $ref: ../../../_shared/components/responses/Unauthorized.yaml }
    "403": { $ref: ../../../_shared/components/responses/Forbidden.yaml }

post:
  tags: [Clients]
  summary: Create client
  security:
    - BearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/clients/ClientStore.yaml
  responses:
    "201":
      description: Created
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/clients/ClientSingleResponse.yaml
    "401": { $ref: ../../../_shared/components/responses/Unauthorized.yaml }
    "403": { $ref: ../../../_shared/components/responses/Forbidden.yaml }
    "422": { $ref: ../../../_shared/components/responses/UnprocessableEntity.yaml }
